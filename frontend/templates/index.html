<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Physics Problem Solver</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        <script>
            function solveProblem() {
                const problem = document.getElementById("problem").value;
                const solveButton = document.getElementById("solve-button");
                const stepsButton = document.getElementById("show-steps-button");
        
                if (!problem.trim()) {
                    alert("Error: Please enter a problem!");
                    return;
                }
        
                solveButton.innerText = "Solving...";
                solveButton.disabled = true;
        
                fetch('/solve', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ problem: problem })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data.message);
                    document.getElementById("solution").value = data.solution;
        
                    const stepsSection = document.getElementById("steps-section");
                    if (data.steps) {
                        stepsSection.innerHTML = `<p>${data.steps}</p>`;
                        stepsSection.style.display = "flex"; // Ensure steps are visible
                        stepsButton.style.display = "inline-block"; // Ensure the button is visible
                        stepsButton.style.visibility = "visible";
                        stepsButton.innerText = "Hide Steps ‚¨ÖÔ∏è"; // Default to "Hide Steps"
                    }
        
                    solveButton.innerText = "Solve! ‚¨áÔ∏è";
                    solveButton.disabled = false;
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert("An error occurred while solving the problem. Please try again.");
                    solveButton.innerText = "Solve! ‚¨áÔ∏è";
                    solveButton.disabled = false;
                });
            }
        
            function toggleSteps() {
                const stepsSection = document.getElementById("steps-section");
                const stepsButton = document.getElementById("show-steps-button");
        
                if (stepsSection.style.visibility === "visible") {
                    // Hide the steps section
                    stepsSection.style.visibility = "hidden";
                    stepsSection.style.display = "none";
                    stepsButton.innerText = "Show Steps ‚û°Ô∏è"; // Change button text
                } else {
                    // Show the steps section
                    stepsSection.style.display = "flex";
                    setTimeout(() => {
                        stepsSection.style.visibility = "visible";
                    }, 10);
                    stepsButton.innerText = "Hide Steps ‚¨ÖÔ∏è"; // Change button text
                }
            }
        </script>
        
        
    </head>
<body>
    <div class="container">
        <div class="left-panel">
            <img src="{{ url_for('static', filename='images/atom.png') }}" alt="Atom" class="atom-image">
            <h1>Physics Problem Solver</h1>
            <div class="input-section">
                <label for="problem">Enter your physics problem to see a solution and visualization!</label>
                <textarea id="problem" placeholder="Type your problem here..."></textarea>
            </div>
            <button id="solve-button" onclick="solveProblem()">Solve! ‚¨áÔ∏è</button>
            <div class="solution-section">
                <label for="solution">Solution</label>
                <textarea id="solution" placeholder="Solution will appear here..." readonly></textarea>
            </div>
            <button id="show-steps-button" style="visibility:hidden;" onclick="toggleSteps()">Show Steps ‚û°Ô∏è</button>

            <!-- Steps Section -->
            <div id="steps-section" class="steps-section" style="display: none;">
                <!-- Steps will be dynamically populated here -->
            </div>
        </div>
        
        
        
        <div class="right-panel">
            <div class="visualization">
                <iframe src="{{ url_for('static', filename='build/web/index.html') }}" width="640" height="480"></iframe>
            </div>
        </div>
    </div>

    <div class="about-us">
        <h2>About Us</h2>
        <p>
            Welcome to the Physics Problem Solver! Our mission is to make physics more accessible
            and fun for everyone. Whether you're a student, a teacher, or just someone curious
            about how the world works, we're here to help you explore and understand physics
            concepts through interactive solutions and visualizations.
        </p>
        <div class="footer">
            Made for SwampHacks X üêä | 
            <a href="https://github.com/lucask6785/SwampHacksX" target="_blank">GitHub Repository</a>
        </div>
    </div>
</body>
</html>
